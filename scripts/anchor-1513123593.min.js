$.fn.anchor=function(a){var b={headingClass:"anchored",anchorClass:"anchor",symbol:"Â¶",maxLength:100},c=$.extend({},b,a),d=$(this),e=[],f=function(a){var b=a.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-").replace(/ /g,"-").toLowerCase();return b};d.each(function(){var a,b=$(this),d=b.text(),g=1;d.length>c.maxLength&&(d=d.substring(0,c.maxLength)),d=f(d),e[d]>=1?(g=e[d]+1,a=d+"-"+g):a=d,b.addClass(c.headingClass).attr("id",a),b.append('<a class="'+c.anchorClass+'" href="#'+a+'">'+c.symbol+"</a>"),e[d]=g})};